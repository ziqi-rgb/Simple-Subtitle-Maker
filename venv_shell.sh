#!/bin/bash
# =================================================================
# Dev Shell - 快速进入虚拟环境命令行
# =================================================================
# 功能: 在当前的终端中，启动一个新的 shell 会话并激活 venv 环境。
# 用途: 方便开发者进行调试、测试或管理 Python 包。
# =================================================================

# 检查虚拟环境是否存在
if [ ! -f "venv/bin/activate" ]; then
    echo ""
    echo "错误: 虚拟环境未找到!"
    echo "请先运行 \"./install.sh\" 脚本来创建环境。"
    echo ""
    exit 1
fi

echo "正在启动已激活虚拟环境的开发者 Shell..."
echo "输入 'exit' 即可退出此环境并返回上一级 Shell。"
echo ""

# 启动一个新的 Bash 子 Shell，并让它在启动时执行 activate 脚本
# --rcfile 参数让这个新的 shell 在启动时读取并执行指定文件
# 当用户在这个新 shell 中输入 exit 后，就会退回到原来的 shell
bash --rcfile venv/bin/activate